import{u as Y}from"./use-quasar.eaa96dc2.js";import{_ as r,R as L,y as R,z as k,k as j,H as p,I as q,G as M,x as Q,O as $,f as V,N as y,A as C,B as b,a0 as X,P as Z,o as J,C as K,D as ee,F as re}from"./index.54693d27.js";import{A as _e}from"./AvPage.7e9bf32f.js";var F=(e=>(e.Male="male",e.Female="female",e.NotSet="notSet",e))(F||{}),_=(e=>(e.Face="face",e.Tops="tops",e.Ear="ear",e.Earrings="earrings",e.Eyebrows="eyebrows",e.Eyes="eyes",e.Nose="nose",e.Glasses="glasses",e.Mouth="mouth",e.Beard="beard",e.Clothes="clothes",e))(_||{}),g=(e=>(e.Circle="circle",e.Square="square",e.Squircle="squircle",e))(g||{}),v=(e=>(e.Base="base",e.SkinTone1="skin-tone-1",e.SkinTone2="skin-tone-2",e.SkinTone3="skin-tone-3",e.SkinTone4="skin-tone-4",e.SkinTone5="skin-tone-5",e.SkinTone6="skin-tone-6",e))(v||{}),w=(e=>(e.Base="#FFCEBC",e.SkinTone1="#F9D4AC",e.SkinTone2="#EDBC84",e.SkinTone3="#E2A86B",e.SkinTone4="#BA7C56",e.SkinTone5="#9A6545",e.SkinTone6="#70CF70",e))(w||{}),n=(e=>(e.Fonze="fonze",e.Funny="funny",e.Clean="clean",e.Punk="punk",e.Danny="danny",e.Wave="wave",e.Turban="turban",e.Pixie="pixie",e.Beanie="beanie",e))(n||{}),I=(e=>(e.Attached="attached",e.Detached="detached",e))(I||{}),O=(e=>(e.Hoop="hoop",e.Stud="stud",e.None="none",e))(O||{}),l=(e=>(e.Up="up",e.Down="down",e.Eyelashesup="eyelashesup",e.Eyelashesdown="eyelashesdown",e))(l||{}),c=(e=>(e.Ellipse="ellipse",e.Smiling="smiling",e.Eyeshadow="eyeshadow",e.Round="round",e))(c||{}),m=(e=>(e.Curve="curve",e.Round="round",e.Pointed="pointed",e))(m||{}),a=(e=>(e.Frown="frown",e.Laughing="laughing",e.Nervous="nervous",e.Pucker="pucker",e.Sad="sad",e.Smile="smile",e.Smirk="smirk",e.Surprised="surprised",e))(a||{}),f=(e=>(e.Scruff="scruff",e.None="none",e))(f||{}),D=(e=>(e.Round="round",e.Square="square",e.None="none",e))(D||{}),A=(e=>(e.Crew="crew",e.Collared="collared",e.Open="open",e))(A||{});const N={[_.Face]:{zIndex:10},[_.Ear]:{zIndex:102},[_.Earrings]:{zIndex:103},[_.Eyebrows]:{zIndex:70},[_.Eyes]:{zIndex:50},[_.Nose]:{zIndex:60},[_.Glasses]:{zIndex:90},[_.Mouth]:{zIndex:100},[_.Beard]:{zIndex:105},[_.Tops]:{zIndex:80},[_.Clothes]:{zIndex:110}},H=async(e,t,o)=>{let i;return o==="widgets"?i=(await r(()=>import("./base.0f4263f1.f22bc419.js"),[])).default:o==="preview"&&(i=(await r(()=>import("./base.ce3c5944.337480a7.js"),[])).default),{default:i({title:e,color:t})}};F.Male,F.Female,Object.values(g),Object.values(v),Object.values(n),Object.values(I),Object.values(O),Object.values(l),Object.values(c),Object.values(m),Object.values(D),Object.values(a),Object.values(f),Object.values(A);v.Base,n.Pixie,I.Attached,O.Stud,l.Up,c.Eyeshadow,m.Pointed,a.Laughing,A.Crew,v.Base,n.Clean,I.Attached,l.Eyelashesdown,c.Round,m.Round,a.Surprised,A.Crew;const oe={[_.Face]:{...Object.keys(v).reduce((e,t)=>(e[v[t]]=()=>H(v[t],w[t],"widgets"),e),{})},[_.Ear]:{[I.Attached]:()=>r(()=>import("./attached.45c8f73c.8aa486e1.js"),[]),[I.Detached]:()=>r(()=>import("./detached.6b6a020f.7559329d.js"),[])},[_.Eyes]:{[c.Ellipse]:()=>r(()=>import("./ellipse.093d0d79.2bf425b1.js"),[]),[c.Eyeshadow]:()=>r(()=>import("./eyeshadow.aacb670f.67eb35a6.js"),[]),[c.Round]:()=>r(()=>import("./round.c6cbbdc1.f466e0ba.js"),[]),[c.Smiling]:()=>r(()=>import("./smiling.3f21334d.17cb6319.js"),[])},[_.Beard]:{[f.Scruff]:()=>r(()=>import("./scruff.1c6d592d.cb3d2b14.js"),[])},[_.Clothes]:{[A.Collared]:()=>r(()=>import("./collared.cbbd8fc2.45ba1d7b.js"),[]),[A.Crew]:()=>r(()=>import("./crew.64b41833.443ce5eb.js"),[]),[A.Open]:()=>r(()=>import("./open.38fc52a5.f69132c7.js"),[])},[_.Earrings]:{[O.Hoop]:()=>r(()=>import("./hoop.1b30a0d8.52e3ce6e.js"),[]),[O.Stud]:()=>r(()=>import("./stud.f8909417.75a840f1.js"),[])},[_.Eyebrows]:{[l.Down]:()=>r(()=>import("./down.6ab63320.cb54d79c.js"),[]),[l.Eyelashesdown]:()=>r(()=>import("./eyelashesdown.b3239db0.94512e70.js"),[]),[l.Eyelashesup]:()=>r(()=>import("./eyelashesup.419f12e0.3e15f574.js"),[]),[l.Up]:()=>r(()=>import("./up.cf3f6439.364b38dc.js"),[])},[_.Glasses]:{[D.Round]:()=>r(()=>import("./round.a8f409e3.3203bad1.js"),[]),[D.Square]:()=>r(()=>import("./square.9c4984bb.b5c98f6e.js"),[])},[_.Mouth]:{[a.Frown]:()=>r(()=>import("./frown.d2f568e1.cc0e3db9.js"),[]),[a.Laughing]:()=>r(()=>import("./laughing.94ce5b6f.63d8acd3.js"),[]),[a.Nervous]:()=>r(()=>import("./nervous.b62c57af.97262772.js"),[]),[a.Pucker]:()=>r(()=>import("./pucker.b1b34ff8.5b06f4e5.js"),[]),[a.Sad]:()=>r(()=>import("./sad.9417e48c.0af3ab31.js"),[]),[a.Smile]:()=>r(()=>import("./smile.4a672692.c8d88a09.js"),[]),[a.Smirk]:()=>r(()=>import("./smirk.482f0de2.7b60e5cc.js"),[]),[a.Surprised]:()=>r(()=>import("./surprised.3bccdd66.e87d884f.js"),[])},[_.Nose]:{[m.Curve]:()=>r(()=>import("./curve.f46f5b62.86ac32aa.js"),[]),[m.Pointed]:()=>r(()=>import("./pointed.c8056126.573dfc15.js"),[]),[m.Round]:()=>r(()=>import("./round.617ed0a0.d4c0e97a.js"),[])},[_.Tops]:{[n.Beanie]:()=>r(()=>import("./beanie.df544859.90a1b520.js"),[]),[n.Clean]:()=>r(()=>import("./clean.2ebaa123.25e01d50.js"),[]),[n.Danny]:()=>r(()=>import("./danny.e7f63b51.e1e0e8e5.js"),[]),[n.Fonze]:()=>r(()=>import("./fonze.e83296fd.b4add946.js"),[]),[n.Funny]:()=>r(()=>import("./funny.929fd6f7.37f06d85.js"),[]),[n.Pixie]:()=>r(()=>import("./pixie.edd38dc8.6407bb30.js"),[]),[n.Punk]:()=>r(()=>import("./punk.85aa02dd.ba11c20e.js"),[]),[n.Turban]:()=>r(()=>import("./turban.69cecade.dc3bd731.js"),[]),[n.Wave]:()=>r(()=>import("./wave.4a637105.3865c58e.js"),[])}};_.Face+"",{...Object.keys(v).reduce((e,t)=>(e[v[t]]=()=>H(v[t],w[t],"preview"),e),{})},_.Ear+"",I.Attached+"",I.Detached+"",_.Eyes+"",c.Ellipse+"",c.Eyeshadow+"",c.Round+"",c.Smiling+"",_.Beard+"",f.Scruff+"",_.Clothes+"",A.Collared+"",A.Crew+"",A.Open+"",_.Earrings+"",O.Hoop+"",O.Stud+"",_.Eyebrows+"",l.Down+"",l.Eyelashesdown+"",l.Eyelashesup+"",l.Up+"",_.Glasses+"",D.Round+"",D.Square+"",_.Mouth+"",a.Frown+"",a.Laughing+"",a.Nervous+"",a.Pucker+"",a.Sad+"",a.Smile+"",a.Smirk+"",a.Surprised+"",_.Nose+"",m.Curve+"",m.Pointed+"",m.Round+"",_.Tops+"",n.Beanie+"",n.Clean+"",n.Danny+"",n.Fonze+"",n.Funny+"",n.Pixie+"",n.Punk+"",n.Turban+"",n.Wave+"";const U=(e,t)=>{const o=e.__vccOpts||e;for(const[i,P]of t)o[i]=P;return o},te=Q({__name:"Background",props:{color:null},setup(e){const t=e;return(o,i)=>(R(),k("div",{class:"avatar-background",style:M({background:t.color})},null,4))}}),ne=U(te,[["__scopeId","data-v-6050a99e"]]),ae={name:"AvatarViewer",components:{AvatarBackground:ne},props:{option:{type:Object,default:()=>({})},size:{default:280,type:Number}},data(){return{svgContent:""}},computed:{getWrapperShapeClassName(){return{[g.Circle]:g.Circle,[g.Square]:g.Square,[g.Squircle]:g.Squircle}[this.option.wrapperShape]||g.Squircle}},watch:{option:{deep:!0,immediate:!0,async handler(e){const t=Object.entries(e.widgets).sort(([u,s],[d,E])=>{var T,S,h,x,z,B;const W=(h=(S=s.zIndex)!=null?S:(T=N[u])==null?void 0:T.zIndex)!=null?h:0,G=(B=(z=E.zIndex)!=null?z:(x=N[d])==null?void 0:x.zIndex)!=null?B:0;return W-G}),[o]=t,i=t.map(async([u,s])=>{if(s.shape==="none")return"";let d=(await oe[u][s.shape]()).default;if(u==="ear"){const[E,T]=o,S=T.shape.replace(/(^.)|(-.)/g,h=>(h[1]||h[0]).toUpperCase());d=d.replace("#targetColor",w[S])}return d}),P=await Promise.all(i).then(u=>u.map((s,d)=>{const E=t[d][1].fillColor,T=s.slice(s.indexOf(">",s.indexOf("<svg"))+1).replace("</svg>","").replaceAll("$fillColor",E||"transparent");return`
              <g id="vue-color-avatar-${t[d][0]}">
                ${T}
              </g>
            `}));this.svgContent=`
          <svg
            width="${this.size}"
            height="${this.size}"
            viewBox="0 0 400 400"
            preserveAspectRatio="xMidYMax meet"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g transform="translate(100, 65)">
              ${P.join("")}
            </g>
          </svg>
        `}}}},ie=["innerHTML"];function se(e,t,o,i,P,u){const s=L("AvatarBackground");return R(),k("div",{class:q(["avatar-viewer",u.getWrapperShapeClassName]),style:M({width:`${o.size}px`,height:`${o.size}px`})},[j(s,{color:o.option.background.color},null,8,["color"]),p("div",{class:"avatar-payload",innerHTML:P.svgContent},null,8,ie)],6)}const ue=U(ae,[["render",se],["__scopeId","data-v-13744362"]]),de=ue;const le="modules.ranking",ce={name:"RankingCard",components:{AvatarViewer:de},props:{userRank:{type:Number,required:!0},userName:{type:String,required:!0},userPoints:{type:Number,required:!0},userAvatar:{type:Object,default:()=>({})},isYou:{type:Boolean,default:!1}},setup(e){const t=V(()=>e.userRank===1),o=V(()=>e.userRank<=3);return{I18N_PATH:le,isFirst:t,isWinner:o}}},pe={class:"ranking-card__wrapper"},Ee={class:"ranking-card__content"},ve={class:"ranking-card__rank"},me={class:"rank-number"},Ae={class:"rank-number__text"},ge={class:"ranking-card__user-image"},Re={class:"ranking-card__points"},Pe={class:"ranking-card__user-name"},Te={class:"ranking-card__user-name-text"},Ie={key:0};function Oe(e,t,o,i,P,u){const s=L("QIcon"),d=L("AvatarViewer");return R(),k("div",{class:q(["ranking-card",`ranking-card--rank-${o.userRank}`])},[p("div",pe,[p("div",Ee,[p("div",ve,[p("div",me,[p("h6",Ae,y(o.userRank)+"\xBA",1)]),i.isWinner&&!i.isFirst?(R(),C(s,{key:0,class:"rank-medal",name:"svguse:/icons.svg#medal"})):b("",!0)]),p("div",ge,[i.isFirst?(R(),C(s,{key:0,name:"svguse:/icons.svg#crown",class:"ranking-card__user-image-crown"})):b("",!0),j(d,{option:o.userAvatar,size:50,title:o.userName},null,8,["option","title"])]),p("div",Re,y(o.userPoints)+"pts",1)]),p("div",Pe,[p("h5",Te,[X(y(o.userName)+" ",1),o.isYou?(R(),k("span",Ie,y(e.$t(`${i.I18N_PATH}.isYou`)),1)):b("",!0)])])])],2)}var De=$(ce,[["render",Oe],["__scopeId","data-v-54d2fa25"]]);const he={name:"RankingPage",components:{AvPage:_e,RankingCard:De},setup(){const e=Y(),t=Z(),o=V(()=>t.getters["RankingModule/getRankings"]);J(async()=>{await t.dispatch("RankingModule/loadRankings")});const i=V(()=>e.screen.xs);return{orderedUsers:V(()=>i.value?o.value:[o.value[1],o.value[0],o.value[2]].filter(u=>u))}}},Ve={class:"ranking-page__ranking-list"};function Le(e,t,o,i,P,u){const s=L("RankingCard"),d=L("AvPage");return R(),C(d,{class:"ranking-page","no-header":""},{default:K(()=>[p("div",Ve,[(R(!0),k(re,null,ee(i.orderedUsers,(E,T)=>(R(),C(s,{key:T,"user-rank":E.position,"user-name":E.userName,"user-points":E.score,"user-avatar":E.avatar,"is-you":E.isYou},null,8,["user-rank","user-name","user-points","user-avatar","is-you"]))),128))])]),_:1})}var Ce=$(he,[["render",Le],["__scopeId","data-v-c7905658"]]);export{Ce as default};
