import{O as $,r as v,f as b,R as h,y as c,z as m,H as o,k as _,C as g,a9 as M,aa as U,Y as G,I,B as f,N as w,G as O,g as F,S as R,U as j,Q as q,P as E,o as H,F as Q,D as Y,A,ab as J}from"./index.45e1f438.js";import{A as K}from"./AvPage.01e5736d.js";import{A as W}from"./AvCard.485bb527.js";const X={name:"search-bar",props:{modelValue:{type:String,default:null}},emits:["update:modelValue"],setup(a,d){const e=v(!!a.modelValue),t=v(null),s=b(()=>e.value||!!a.modelValue);return{inputElement:t,isActiveShowBar:s,handleInput:n=>{d.emit("update:modelValue",n)},toggleSearchBar:async()=>{e.value=!e.value,e.value&&(await t.value,t.value.focus())}}}},Z={class:"search-bar__input-wrapper"},ee={class:"search-bar__button-wrapper"};function te(a,d,e,t,s,i){const r=h("QInput"),n=h("QBtn");return c(),m("div",{class:I(["search-bar",{"search-bar--active":t.isActiveShowBar}])},[o("div",Z,[_(G,{name:"search-bar__input"},{default:g(()=>[M(_(r,{class:"search-bar__input",dense:"",filled:"",color:"primary",ref:"inputElement","model-value":e.modelValue,"onUpdate:modelValue":t.handleInput},null,8,["model-value","onUpdate:modelValue"]),[[U,t.isActiveShowBar]])]),_:1})]),o("div",ee,[_(n,{class:"search-bar__button",padding:"sm",icon:"search",color:"white",disable:!!e.modelValue,onClick:t.toggleSearchBar},null,8,["disable","onClick"])])],2)}var ae=$(X,[["render",te],["__scopeId","data-v-7e4aa34a"]]);const se="modules.activities.components.activityCard",ie={name:"ActivityCard",emits:["start-now"],components:{AvCard:W},props:{title:{type:String,required:!0},description:{type:String,default:null},status:{type:String,default:null},cover:{type:Object,required:!1},progress:{type:Number,default:null}},setup(a,d){const{appContext:e}=F(),t=b(()=>{var r;return(r=a.cover)!=null&&r.path?`${e.config.globalProperties.$appStorage}/${a.cover.path}`:e.config.globalProperties.$defaultActivityCover}),s=b(()=>a.progress===100);return{I18N_PATH:se,imagePath:t,isCompleted:s,handleStartNow:()=>{d.emit("start-now")}}}},ne=a=>(R("data-v-0fe4aabc"),a=a(),j(),a),re={class:"activity-card"},le={class:"activity-card__image-wrapper"},oe=["src","alt"],ce={class:"activity-card__content"},de={class:"activity-card__title"},ue=["title"],_e=ne(()=>o("div",{class:"progress-bar__progress"},null,-1)),ve={class:"progress-bar__label"},pe={class:"activity-card__cta-wrapper"};function me(a,d,e,t,s,i){const r=h("QBadge"),n=h("QBtn"),u=h("AvCard");return c(),m("div",re,[_(u,{class:"activity-card__wrapper"},{header:g(()=>[o("div",le,[o("img",{class:"activity-card__image",src:t.imagePath,alt:e.cover.tipo},null,8,oe)])]),default:g(()=>[o("div",ce,[e.status?(c(),m("div",{key:0,class:I(["activity-card__progress-badge",`activity-card__progress-badge--${e.status}`])},[_(r,{rounded:"",label:a.$t(`${t.I18N_PATH}.status.${e.status}`)},null,8,["label"])],2)):f("",!0),o("h3",de,w(e.title),1),e.description?(c(),m("h4",{key:1,class:"activity-card__description",title:e.description},w(e.description),9,ue)):f("",!0),e.progress!==null?(c(),m("div",{key:2,class:"progress-bar",style:O({"--progress":`${e.progress}%`})},[_e,o("p",ve,w(e.progress)+"%",1)],4)):f("",!0),o("div",pe,[_(n,{size:"sm",label:a.$t(`${t.I18N_PATH}.access`),color:"primary",onClick:t.handleStartNow},null,8,["label","onClick"])])])]),_:1})])}var he=$(ie,[["render",me],["__scopeId","data-v-0fe4aabc"]]);const ge=["width","height"],ye=["src"],fe={__name:"ActivitiesPresentation",props:{presentationId:{type:[Number,String],reuqired:!0}},emits:["ended"],setup(a,{emit:d}){const e=()=>{d("ended")};return(t,s)=>(c(),m("video",{class:"activities-presentation",autoplay:"",width:t.$q.screen.width,height:t.$q.screen.height,onEnded:e},[o("source",{src:`/activities-presentation/animacao-${a.presentationId}.mp4`,type:"video/mp4"},null,8,ye)],40,ge))}};var Ae=$(fe,[["__scopeId","data-v-fccc2916"]]);const be={class:"activities-list__header"},$e={class:"activities-list__title"},T="modules.activities.components.activitiesList",Se={__name:"ActivitiesList",props:{title:{type:String,required:!0},activities:{type:Array,required:!0}},emits:["start-activity"],setup(a,{emit:d}){const e=a,t=q(),s=E(),i=v(!1),r=v(),n=v(!1),u=v([]);v([]),b(()=>i.value?u.value:u.value.slice(0,3));const S=async l=>{r.value=l;let p=await s.dispatch("ActivitiesModule/getActivityPresentationId",r.value);if(!p)return k();L(p)},L=l=>{n.value=l},k=()=>{n.value=!1,t.push({name:"activities.stage-list",params:{id:r.value},query:{goal:!0}})},D=(l,p)=>{let P=(l.dataset.index>6?7:l.dataset.index)*150;setTimeout(()=>{u.value[l.dataset.index].enter=!0,p()},P)},z=()=>{i.value=!i.value,V()},V=()=>{u.value=[];let l=e.activities.map(p=>({...p,enter:!1}));i.value||(l=l.slice(0,3)),u.value=l};return H(()=>{V()}),(l,p)=>{const x=h("QBtn"),P=h("QDialog");return c(),m(Q,null,[o("div",{class:I(["activities-list",{"activities-list--is-open":i.value}])},[o("div",be,[o("h2",$e,w(a.title),1),_(x,{flat:"",icon:i.value?"remove":"add",label:`
          ${i.value?l.$t(`${T}.seeLess`):l.$t(`${T}.seeMore`)}
        `,color:"primary",padding:"xs",onClick:z},null,8,["icon","label"])]),_(J,{class:"activities-list__activities",tag:"div",css:!1,onEnter:D},{default:g(()=>[(c(!0),m(Q,null,Y(u.value,(y,B)=>(c(),A(he,{class:I([B,"activities-list__item",{"activities-list__item--enter":!y.enter}]),key:`activity-${B}-open-${i.value}`,"data-index":B,title:y.name,cover:y.cover,progress:y.progress,onStartNow:Pe=>S(y.id)},null,8,["class","data-index","title","cover","progress","onStartNow"]))),128))]),_:1})],2),_(P,{"model-value":!!n.value,persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:g(()=>[_(Ae,{"presentation-id":n.value,onEnded:p[0]||(p[0]=y=>k())},null,8,["presentation-id"])]),_:1},8,["model-value"])],64)}}};var C=$(Se,[["__scopeId","data-v-1450d728"]]);const we={class:"activity-list__wrapper"},N="modules.activities",Ie={__name:"index",setup(a){const d=E();q();const e=v(),t=v(),s=v({available:[],inProgress:[],completed:[]});return b(()=>t.value?s.value[t.value]||[]:[]),H(async()=>{const i=await d.dispatch("ActivitiesModule/getActivities");s.value=i,d.dispatch("AuthModule/refreshUser")}),(i,r)=>(c(),A(K,{class:"activity-page","no-content-padding":""},{header:g(()=>[_(ae,{modelValue:e.value,"onUpdate:modelValue":r[0]||(r[0]=n=>e.value=n)},null,8,["modelValue"])]),default:g(()=>{var n,u,S;return[o("div",we,[((n=s.value)==null?void 0:n.inProgress)&&s.value.inProgress.length?(c(),A(C,{key:0,title:i.$t(`${N}.activitiesSteps.inProgress`),activities:s.value.inProgress},null,8,["title","activities"])):f("",!0),((u=s.value)==null?void 0:u.available)&&s.value.available.length?(c(),A(C,{key:1,title:i.$t(`${N}.activitiesSteps.available`),activities:s.value.available},null,8,["title","activities"])):f("",!0),((S=s.value)==null?void 0:S.completed)&&s.value.completed.length?(c(),A(C,{key:2,title:i.$t(`${N}.activitiesSteps.completed`),activities:s.value.completed},null,8,["title","activities"])):f("",!0)])]}),_:1}))}};var ke=$(Ie,[["__scopeId","data-v-6c051fe2"]]);export{ke as default};
